"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SwnQueue = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_lambda_event_sources_1 = require("aws-cdk-lib/aws-lambda-event-sources");
const aws_sqs_1 = require("aws-cdk-lib/aws-sqs");
const constructs_1 = require("constructs");
class SwnQueue extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        //queue
        this.orderQueue = new aws_sqs_1.Queue(this, 'OrderQueue', {
            queueName: 'OrderQueue',
            visibilityTimeout: aws_cdk_lib_1.Duration.seconds(30) // default value
        });
        props.consumer.addEventSource(new aws_lambda_event_sources_1.SqsEventSource(this.orderQueue, {
            batchSize: 1
        }));
    }
}
exports.SwnQueue = SwnQueue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVldWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJxdWV1ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2Q0FBdUM7QUFFdkMsbUZBQXNFO0FBQ3RFLGlEQUFvRDtBQUNwRCwyQ0FBdUM7QUFNdkMsTUFBYSxRQUFTLFNBQVEsc0JBQVM7SUFJbkMsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFvQjtRQUMxRCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRW5CLE9BQU87UUFDUCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksZUFBSyxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUU7WUFDOUMsU0FBUyxFQUFHLFlBQVk7WUFDeEIsaUJBQWlCLEVBQUUsc0JBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsZ0JBQWdCO1NBQ3pELENBQUMsQ0FBQztRQUVILEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUkseUNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQzlELFNBQVMsRUFBRSxDQUFDO1NBQ2YsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDO0NBQ0o7QUFqQkQsNEJBaUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHVyYXRpb24gfSBmcm9tIFwiYXdzLWNkay1saWJcIjtcbmltcG9ydCB7IElGdW5jdGlvbiB9IGZyb20gXCJhd3MtY2RrLWxpYi9hd3MtbGFtYmRhXCI7XG5pbXBvcnQgeyBTcXNFdmVudFNvdXJjZSB9IGZyb20gXCJhd3MtY2RrLWxpYi9hd3MtbGFtYmRhLWV2ZW50LXNvdXJjZXNcIjtcbmltcG9ydCB7IElRdWV1ZSwgUXVldWUgfSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLXNxc1wiO1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSBcImNvbnN0cnVjdHNcIjtcblxuaW50ZXJmYWNlIFN3blF1ZXVlUHJvcHMge1xuICAgIGNvbnN1bWVyOiBJRnVuY3Rpb247XG59XG5cbmV4cG9ydCBjbGFzcyBTd25RdWV1ZSBleHRlbmRzIENvbnN0cnVjdCB7XG5cbiAgICBwdWJsaWMgcmVhZG9ubHkgb3JkZXJRdWV1ZTogSVF1ZXVlO1xuXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFN3blF1ZXVlUHJvcHMpIHtcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkKTtcblxuICAgICAgLy9xdWV1ZVxuICAgICAgdGhpcy5vcmRlclF1ZXVlID0gbmV3IFF1ZXVlKHRoaXMsICdPcmRlclF1ZXVlJywge1xuICAgICAgICBxdWV1ZU5hbWUgOiAnT3JkZXJRdWV1ZScsXG4gICAgICAgIHZpc2liaWxpdHlUaW1lb3V0OiBEdXJhdGlvbi5zZWNvbmRzKDMwKSAvLyBkZWZhdWx0IHZhbHVlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcHJvcHMuY29uc3VtZXIuYWRkRXZlbnRTb3VyY2UobmV3IFNxc0V2ZW50U291cmNlKHRoaXMub3JkZXJRdWV1ZSwge1xuICAgICAgICAgIGJhdGNoU2l6ZTogMVxuICAgICAgfSkpO1xuICAgIH1cbn0iXX0=